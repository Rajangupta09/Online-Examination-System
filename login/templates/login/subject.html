{% load static %}
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'login/category.css' %}">
</head>


<!-- Body -->
<body>

<!--  Side Nav bar -->
<div id="mySidenav" class="sidenav">
        <img src="{{ user.profile.image.url }}" alt="">
        <div class="info1">
          <h3><a href="#">{{ user.username }}</a></h3>
          <p><b>JDMR Ischool</b></p>
        </div>
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="{% url 'category' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i>Category</a>
  <a href="{% url 'sub_category' %}"><a href="#"> Sub Category</a>
  <a href="#"><i class="fa fa-envelope fa-fw"></i> Subject</a>
  <a href="#"><i class="fa fa-support fa-fw"></i>Center</a>
  <a href="#"><i class="fa fa-users fa-fw"></i>Student</a>
  <a href="#"><i class="fa fa-envelope fa-fw"></i> Exam</a>
  <a href="#"><i class="fa fa-comments-o fa-fw"></i>Question</a>
  <a href="#"><i class="fa fa-wrench fa-fw"></i> Settings</a>
  <a href="#"> <i class="fa fa-support fa-fw"></i>Notice</a>
  <a href="#"><i class="fa fa-comments-o fa-fw"></i>View Result</a>

</div>

<!--  End of Side Nav Bar -->

<!--   Upper Nav Bar -->
<ul>
  <li><span class="active" style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span></li>  
  <li><a href="{% url 'home' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i>Home</a></li>
  <li><a href="#news">News</a></li>
  <li><a href="#contact">Contact</a></li>
  <li><a href="#about">About</a></li>
  <li style="float:right"><a class="active" href="{% url 'logout' %}">Log out</a></li>
  <div class="topnav">
  <li style="float:right"><input type="text" placeholder="Search.."></li>
  </div>
  
</ul>
<br>

<!-- End of Upper Nav Bar -->

<!-- Welcome Nav Bar -->
<div class="nav2">
    <p><b><u><center>Welcome to Subject</center></u></b></p>
</div>
<hr>
<!--  End of Welcome nav bar -->


<!--  Content -->

<h1><u><b><center>Subject</center></b></u></h1>

<div class="border">
  <div class="input-group">
    <form class="form-inline my-2 my-lg-1">
      <div class="input-group">
        {% if search_term %}
        <input class="form-control mr-sm-2" type="search" placeholder="{{search_term}}" aria-label="Search" name=search>
        <div class="input-group-addon">
          <button type="submit" class="fabutton">
         <i class="fa fa-close">
         </i>
         </button>
         {%else%}
         <input class="form-control mr-sm-2" type="search" placeholder='search' aria-label="Search" name=search>
         <div class="input-group-addon">
          <button type="submit" class="fabutton">
         <i class="fa fa-search">
        </i>
        </button>
        {%endif%}
      
    </div>
  </div>

    </form>      
  </div>
  <div class="row">
    <div class="column" style="background-color:#dde;">
      <br>
      <h3><b><center>Add Subject</center></b></h3>
      
      <form  method="POST" id="subform" class="example" data-cities-url="{% url 'loadsub' %}" novalidate>
        {% csrf_token %}
        <div class="input-group">
            <select class="custom-select col-4" id="cat" name="category" aria-label="Example select with button addon">
              <option selected>Select Category</option>
              {% for categorie in categories %}
              <option value="{{categorie.id}}">{{categorie.category}}</option>
              {% endfor %}
            </select>
            <select class="custom-select col-4" name="sub_category" id="sub" aria-label="Example select with button addon">
              <option selected>Sub Category</option>
            </select>
          </div>
        <input type="text" placeholder="Subject" name="subject" required>
        <button type="submit">ADD</button>
      </form>
      <hr>
      <div>
           



          <table class="table table-striped" id="myTable">
            <thead>
              <tr>
              
                <th onclick="sortTable(0)">Subject <i class="fa fa-sort"></i></th>
                <th onclick="sortTable(1)">SubCategory</th>
                <th onclick="sortTable(2)">Category</th>
                <th>Status</th>
                <th>Option</th>
              </tr>
            </thead>
            <tbody>
              {% for sub in Subject %}
              <tr>
                {% if sub.status == True %}
                <td>{{sub.subject}}</td>
                <td>{{sub.sub_category.category}}</td>
                <td>{{sub.sub_category}}</td>
                <td><a href="{% url 'subjstat' sub.id %}">
                  <button class="btn btn-danger" type="submit"><i class="fa fa-eye-slash"> </i> &nbsp; Deactivate</button> </a></td>>
                <td><a href="{%url 'subject_edit' sub.id%}" <button class="btn btn-info"> <i class="fa fa-edit"> </i> Edit</button></a> &nbsp; <a href="{% url 'subject_delete' sub.id %}"> <button  type="submit" class="btn btn-danger" name="delete"><i class="fa fa-trash-o"> </i> Delete</button></a></td>
                {% else %}
                <td>{{sub.subject}}</td>
                <td>{{sub.sub_category}}</td>
                <td>{{sub.sub_category}}</td>
                <td><a href="{% url 'subjstat' sub.id %}">
                  <button class="btn btn-success" type="submit"><i class="fa fa-eye-slash"> </i> &nbsp; Activate</button> </a></td>>
                <td><a href="{%url 'subject_edit' sub.id %}" <button class="btn btn-info"> <i class="fa fa-edit"> </i> Edit</button></a> &nbsp; <a href="{% url 'subject_delete' sub.id %}"> <button  type="submit" class="btn btn-danger" name="delete"><i class="fa fa-trash-o"> </i> Delete</button></a></td>
                
                {% endif %}
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <div class="row">
						<div class="col-12">
					{% if Subject.has_other_pages %}
					<div class="pagination text-center">                
						<nav class="pagination__nav clearfix">
							{% if Subject.has_previous %}
							<a href="?page={{Subject.previous_page_number}}" class="pagination__page"><i class="ui-arrow-left"></i></a>
							{% else %}
							<a class="pagination__page disabled"><i class="ui-arrow-left"></i></a>
							{% endif %}
							{% for i in Subject.paginator.page_range %}
								{% if Subject.number == i %}
									<span class="pagination__page pagination__page--active">{{i}}</span>
								{% else %}
							<a href="?page={{i}}" class="pagination__page">{{i}}</a>
								{% endif %}
							{% endfor %}
							{% if Subject.has_next %}
							<a href="?page={{Subject.next_page_number}}" class="pagination__page"><i class="ui-arrow-right"></i></a>
							{% else %}
							<a class="pagination__page disabled"><i class="ui-arrow-right"></i></a>
							{% endif %}
						</nav>
					</div>
					{% endif %}
					</div>
					</div>
        
      </div>    
    </div>
  </div>    
</div>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
 $("#cat").change(function () {
    var url = $("#subform").attr("data-cities-url"); 
    var categoryId = $(this).val();  

    $.ajax({                       
      url: url,                    
      data: {
        'category': categoryId    
      },
      success: function (data) { 
        $("#sub").html(data);  
      }
    });

  });

</script>
<script  src="{% static 'login/category.js' %}"></script>
</html>